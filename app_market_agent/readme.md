# App Market Analyzer (iOS 인디 마켓 리서치 자동화 에이전트)

본 프로젝트는 성공 가능성이 높은 해외 iOS 유망 니치(Niche) 마켓 앱을 자동으로 검색하고, AI를 통해 인디 개발자가 도전해 볼 만한 앱인지 평가한 후, 해당 앱의 부정적 리뷰(Pain Points)에서 새로운 프로덕트 기회를 역기획하는 지능형 스크래핑 및 대시보드 시스템입니다.

---

## 🚀 파이프라인 작동 흐름 요약 (`main.py` 중심)

이 에이전트의 전체 자동화 로직은 `main.py`의 `AppMarketAgent.run()` 메서드를 통해 오케스트레이션(Orchestration)됩니다.

### 1단계: 초기 타겟 앱 수집 (`StoreScraper`)
1. 파이프라인이 실행되면 먼저 **`store_scraper.py`** 모듈을 호출하여 후보군 앱 리스트를 구성합니다.
2. 하드코딩된 '인디 개발 친화적 니치 키워드'들(예: `ADHD Planner`, `Pet journal`, `Digital detox`)을 iTunes Search API에 검색하여 무작위로 타겟 앱 후보군을 **최대 40개** 추출합니다.
3. 앱 이름, 설명, ID, 플랫폼 등의 메타데이터를 수집합니다.

### 2단계: AI 기반 잠재력 필터링 (`AIAnalyzer`)
1. 무작위로 수집된 40개의 후보 앱들을 순회하며 하나씩 **`ai_analyzer.py`** 모듈로 넘깁니다.
2. **Gemini 1.5 Pro 모델**을 활용하여 다음 3가지 항목을 기준으로 해당 앱이 인디 개발자가 클론/개선하기 좋은 앱인지 합격/불합격 여부를 엄격히 평가(Evaluate) 합니다:
   - **Niche Market (니치 마켓 여부)**: 타겟이 명확하고 뾰족한 특수 목적 시장인가?
   - **Revenue Model (수익 모델)**: 정기 결제나 평생 이용권 같은 수익화가 가능해 보이는가?
   - **Simplicity (기능 단순성)**: 무거운 서버 구축 없이 1~2명의 인디 개발자가 단기간 내에 개발할 수 있는가?
3. 위 필터링을 통과한 **최대 15개**의 최종 유망 앱 데이터만을 추출합니다.

### 3단계: SQLite 데이터베이스 영구 저장 (`models.py`, `database.py`)
1. 파이프라인 실행 시 부여된 고유한 **분석 회차(RunHistory)** ID를 기준으로, AI 필터링을 통과한 유망 앱 데이터들을 **앱 목록(AppItem)**으로 SQLite DB(`app_market.db`)에 영구 저장합니다.
2. 향후 웹 대시보드에서 `Log 보기` 버튼을 통해 당시의 런타임 환경을 파악할 수 있도록, 파이썬 표준 `logging` 출력을 메모리(`io.StringIO`) 상에 가로채서 실행 콘솔 스크립트 전문(`log_output`)도 데이터베이스에 함께 저장합니다.

### 4단계: 일일 마크다운 리포트 이메일 발송
1. 최종 발굴된 15개 이하의 유망 앱 목록과 AI의 선정 사유를 깔끔한 **Markdown 텍스트 포맷**으로 요약합니다.
2. `.env` 파일에 설정된 `SMTP` 이메일 계정을 통하여, 등록된 수신인(사용자)에게 **[일일 분석 리포트] 이메일을 자동 발송**하고 파이프라인을 종료합니다.

---

## 📈 심층 리뷰 역기획 액션 (웹 대시보드 프론트엔드 연동)

`main.py`가 주기적으로 발굴해낸 앱들은 제공된 **통합 웹 대시보드 (`index.html`)**를 통해 시각적으로 열람이 가능합니다. 이 대시보드는 추가적인 심층 분석 요청(`server.py`)을 지원합니다.

### On-demand 심층 요구사항 분석 (`POST /api/collect_detail`)
웹 UI에서 특정 앱 카드의 **[수집 시작]** 버튼을 클릭할 경우 아래 로직이 실시간 비동기로 수행됩니다.
1. `app_store_scraper` 패키지를 사용하여 해당 앱의 최신 **부정적 리뷰 (별점 1~3점)**를 크롤링합니다.
2. **Gemini AI**에게 원문 리뷰 목록을 프롬프트로 전달하여 다음 항목을 도출합니다:
   - **🚨 유저 불만 사항 (Pain Points):** 현재 앱의 가장 큰 단점과 유저들이 떠나는 이유
   - **💡 신규 기능 요구 (Requested Features):** 유저들이 원하지만 아직 이 앱에 없는 기능 등 새로운 제품 개발을 위한 핵심 인사이트
3. 분석이 완료되면 도출된 결과를 DB의 **`AppDetail` 모듈**에 연결하여 저장하고 화면에 팝업 형태로 즉각 표출합니다.

---

## ⚙️ 아키텍처 및 주요 기술 스택

- **Orchestration**: `Python 3` (스크래핑 로직 제어 및 콘솔 출력 로깅)
- **Web Backend API**: `FastAPI`, `Uvicorn` (백그라운드 크롤링 트리거 및 DB API 제공)
- **Database**: `SQLite`, `SQLAlchemy` ORM (초경량 영구 저장소)
- **AI / LLM Model**: `Google Gemini 1.5 Pro` (데이터 필터링 및 자연어 분석)
- **Frontend SPA**: `HTML5`, `Vue.js 3`, `Tailwind CSS` (무채색 계열의 미니멀 데스크톱 인터페이스 구현)
